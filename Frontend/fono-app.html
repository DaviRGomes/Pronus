<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FonoFlow - Treino de Pron√∫ncia</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #0f172a, #1e293b); min-height: 100vh; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .pulse { animation: pulse 1s infinite; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-thumb { background: #6366f1; border-radius: 4px; }
    </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useRef } = React;
const API = 'http://localhost:8080';

// ========== APP ==========
function App() {
    const [user, setUser] = useState(null);
    const [token, setToken] = useState(localStorage.getItem('token'));
    const [view, setView] = useState('login');
    const [especialista, setEspecialista] = useState(null);

    useEffect(() => {
        const u = localStorage.getItem('user');
        if (u && token) { setUser(JSON.parse(u)); setView('dashboard'); }
    }, []);

    const login = (u, t) => {
        setUser(u); setToken(t);
        localStorage.setItem('token', t);
        localStorage.setItem('user', JSON.stringify(u));
        setView('dashboard');
    };

    const logout = () => {
        setUser(null); setToken(null);
        localStorage.clear();
        setView('login');
    };

    return (
        <div style={{minHeight:'100vh'}}>
            {view === 'login' && <Login onLogin={login} />}
            {view === 'dashboard' && <Dashboard user={user} token={token} onLogout={logout} onChat={(e) => { setEspecialista(e); setView('chat'); }} />}
            {view === 'chat' && <Chat user={user} token={token} especialista={especialista} onBack={() => setView('dashboard')} />}
        </div>
    );
}

// ========== LOGIN ==========
function Login({ onLogin }) {
    const [login, setLogin] = useState('');
    const [senha, setSenha] = useState('');
    const [loading, setLoading] = useState(false);
    const [error, setError] = useState('');

    const submit = async (e) => {
        e.preventDefault();
        setLoading(true); setError('');
        try {
            const res = await fetch(`${API}/auth/login`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ login, senha })
            });
            if (!res.ok) throw new Error('Credenciais inv√°lidas');
            const data = await res.json();
            onLogin({ id: data.id, nome: data.nome, tipo: data.tipoUsuario }, data.token);
        } catch (err) {
            setError(err.message);
        }
        setLoading(false);
    };

    return (
        <div style={{display:'flex',alignItems:'center',justifyContent:'center',minHeight:'100vh',padding:20}}>
            <div style={{background:'rgba(30,41,59,0.95)',borderRadius:24,padding:48,maxWidth:400,width:'100%',boxShadow:'0 25px 50px rgba(0,0,0,0.5)'}}>
                <div style={{textAlign:'center',marginBottom:32}}>
                    <div style={{fontSize:64,marginBottom:16}}>üó£Ô∏è</div>
                    <h1 style={{color:'#f8fafc',fontSize:32,margin:0}}>FonoFlow</h1>
                    <p style={{color:'#94a3b8',marginTop:8}}>Treino de pron√∫ncia com IA</p>
                </div>
                <form onSubmit={submit}>
                    <div style={{marginBottom:20}}>
                        <label style={{color:'#e2e8f0',display:'block',marginBottom:8,fontSize:14}}>Login</label>
                        <input value={login} onChange={e => setLogin(e.target.value)} placeholder="Digite seu login"
                            style={{width:'100%',padding:16,borderRadius:12,border:'2px solid rgba(255,255,255,0.1)',background:'rgba(15,23,42,0.6)',color:'#fff',fontSize:16,outline:'none'}} required />
                    </div>
                    <div style={{marginBottom:20}}>
                        <label style={{color:'#e2e8f0',display:'block',marginBottom:8,fontSize:14}}>Senha</label>
                        <input type="password" value={senha} onChange={e => setSenha(e.target.value)} placeholder="Digite sua senha"
                            style={{width:'100%',padding:16,borderRadius:12,border:'2px solid rgba(255,255,255,0.1)',background:'rgba(15,23,42,0.6)',color:'#fff',fontSize:16,outline:'none'}} required />
                    </div>
                    {error && <div style={{background:'rgba(239,68,68,0.2)',border:'1px solid rgba(239,68,68,0.3)',borderRadius:12,padding:12,color:'#fca5a5',marginBottom:20}}>‚ö†Ô∏è {error}</div>}
                    <button type="submit" disabled={loading}
                        style={{width:'100%',padding:16,borderRadius:12,border:'none',background:'linear-gradient(135deg,#6366f1,#8b5cf6)',color:'#fff',fontSize:16,fontWeight:600,cursor:'pointer',opacity:loading?0.7:1}}>
                        {loading ? '‚è≥ Entrando...' : 'Entrar'}
                    </button>
                </form>
                <div style={{marginTop:24,padding:16,background:'rgba(99,102,241,0.1)',borderRadius:12,textAlign:'center'}}>
                    <p style={{color:'#a5b4fc',fontSize:13,margin:0}}>üß™ <strong>Teste:</strong> ana.5 / Senha: 123456</p>
                </div>
            </div>
        </div>
    );
}

// ========== DASHBOARD ==========
function Dashboard({ user, token, onLogout, onChat }) {
    const [especialistas, setEspecialistas] = useState([]);
    const [selected, setSelected] = useState(null);
    const [loading, setLoading] = useState(true);

    useEffect(() => {
        fetch(`${API}/especialistas`, { headers: { Authorization: `Bearer ${token}` } })
            .then(r => r.json())
            .then(data => { setEspecialistas(data); if(data.length) setSelected(data[0]); })
            .catch(console.error)
            .finally(() => setLoading(false));
    }, []);

    return (
        <div style={{minHeight:'100vh',display:'flex',flexDirection:'column'}}>
            {/* Header */}
            <header style={{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'16px 32px',background:'rgba(30,41,59,0.8)',borderBottom:'1px solid rgba(255,255,255,0.1)'}}>
                <div style={{display:'flex',alignItems:'center',gap:12}}>
                    <span style={{fontSize:32}}>üó£Ô∏è</span>
                    <span style={{color:'#f8fafc',fontSize:20,fontWeight:700}}>FonoFlow</span>
                </div>
                <div style={{display:'flex',alignItems:'center',gap:16}}>
                    <div style={{display:'flex',alignItems:'center',gap:12,padding:'8px 16px',background:'rgba(99,102,241,0.2)',borderRadius:12}}>
                        <span style={{fontSize:24}}>{user.tipo === 'CLIENTE' ? 'üë§' : 'üë©‚Äç‚öïÔ∏è'}</span>
                        <div>
                            <div style={{color:'#f8fafc',fontSize:14,fontWeight:600}}>{user.nome}</div>
                            <div style={{color:'#a5b4fc',fontSize:11}}>{user.tipo}</div>
                        </div>
                    </div>
                    <button onClick={onLogout} style={{padding:'8px 16px',borderRadius:8,border:'1px solid rgba(255,255,255,0.2)',background:'transparent',color:'#94a3b8',cursor:'pointer'}}>Sair</button>
                </div>
            </header>

            {/* Main */}
            <main style={{flex:1,padding:32,maxWidth:1200,margin:'0 auto',width:'100%'}}>
                {/* Welcome */}
                <div style={{background:'linear-gradient(135deg,rgba(99,102,241,0.3),rgba(139,92,246,0.3))',borderRadius:20,padding:32,marginBottom:32,display:'flex',justifyContent:'space-between',alignItems:'center'}}>
                    <div>
                        <h1 style={{color:'#f8fafc',fontSize:28,margin:0}}>Ol√°, {user.nome.split(' ')[0]}! üëã</h1>
                        <p style={{color:'#cbd5e1',marginTop:12,maxWidth:500}}>Pronto para treinar sua pron√∫ncia? Vamos praticar com trava-l√≠nguas divertidos!</p>
                    </div>
                    <div style={{fontSize:80}}>üéØ</div>
                </div>

                {user.tipo === 'CLIENTE' && (
                    <div style={{background:'rgba(30,41,59,0.6)',borderRadius:20,padding:32,marginBottom:32}}>
                        <h2 style={{color:'#f8fafc',fontSize:20,margin:'0 0 24px'}}>Escolha seu Fonoaudi√≥logo</h2>
                        <div style={{display:'grid',gridTemplateColumns:'repeat(auto-fill,minmax(280px,1fr))',gap:16,marginBottom:24}}>
                            {loading ? <div style={{color:'#94a3b8',padding:32}}>‚è≥ Carregando...</div> :
                            especialistas.map(esp => (
                                <div key={esp.id} onClick={() => setSelected(esp)}
                                    style={{display:'flex',alignItems:'center',gap:16,padding:16,background:selected?.id === esp.id ? 'rgba(99,102,241,0.2)' : 'rgba(15,23,42,0.6)',
                                    borderRadius:12,border:selected?.id === esp.id ? '2px solid #6366f1' : '2px solid transparent',cursor:'pointer',position:'relative'}}>
                                    <span style={{fontSize:40}}>üë©‚Äç‚öïÔ∏è</span>
                                    <div>
                                        <div style={{color:'#f8fafc',fontWeight:600}}>{esp.nome}</div>
                                        <div style={{color:'#a5b4fc',fontSize:13}}>{esp.especialidade || 'Fonoaudiologia'}</div>
                                        <div style={{color:'#64748b',fontSize:12}}>CRM: {esp.crmFono || 'N/A'}</div>
                                    </div>
                                    {selected?.id === esp.id && <div style={{position:'absolute',top:12,right:12,width:24,height:24,background:'#6366f1',borderRadius:'50%',display:'flex',alignItems:'center',justifyContent:'center',color:'#fff',fontWeight:'bold'}}>‚úì</div>}
                                </div>
                            ))}
                        </div>
                        <button onClick={() => selected && onChat(selected)} disabled={!selected}
                            style={{width:'100%',padding:20,borderRadius:16,border:'none',background:'linear-gradient(135deg,#6366f1,#8b5cf6)',color:'#fff',fontSize:18,fontWeight:600,cursor:selected?'pointer':'not-allowed',opacity:selected?1:0.5,display:'flex',alignItems:'center',justifyContent:'center',gap:12}}>
                            <span style={{fontSize:24}}>üé§</span> Iniciar Sess√£o de Treino
                        </button>
                    </div>
                )}

                {/* Info Cards */}
                <div style={{display:'grid',gridTemplateColumns:'repeat(auto-fit,minmax(250px,1fr))',gap:20}}>
                    {[{icon:'üìä',title:'Como funciona',text:'Receba um trava-l√≠ngua, grave seu √°udio e receba feedback da IA!'},
                      {icon:'üéØ',title:'Dificuldades',text:'Treine fonemas: R, L, S, CH, LH, X e mais!'},
                      {icon:'üèÜ',title:'Progresso',text:'Acompanhe sua evolu√ß√£o a cada sess√£o!'}].map((c,i) => (
                        <div key={i} style={{background:'rgba(30,41,59,0.6)',borderRadius:16,padding:24}}>
                            <div style={{fontSize:40,marginBottom:16}}>{c.icon}</div>
                            <h3 style={{color:'#f8fafc',fontSize:18,margin:'0 0 8px'}}>{c.title}</h3>
                            <p style={{color:'#94a3b8',fontSize:14,margin:0,lineHeight:1.6}}>{c.text}</p>
                        </div>
                    ))}
                </div>
            </main>
        </div>
    );
}

// ========== CHAT ==========
function Chat({ user, token, especialista, onBack }) {
    const [msgs, setMsgs] = useState([]);
    const [sessaoId, setSessaoId] = useState(null);
    const [loading, setLoading] = useState(false);
    const [recording, setRecording] = useState(false);
    const [audioBlob, setAudioBlob] = useState(null);
    const [dificuldade, setDificuldade] = useState('R');
    const [started, setStarted] = useState(false);
    const [finished, setFinished] = useState(false);
    const mediaRef = useRef(null);
    const chunksRef = useRef([]);
    const endRef = useRef(null);

    useEffect(() => { endRef.current?.scrollIntoView({ behavior: 'smooth' }); }, [msgs]);

    const difs = [{v:'R',l:'R',d:'rato, carro'},{v:'L',l:'L',d:'lua, bola'},{v:'S',l:'S',d:'sapo'},{v:'CH',l:'CH',d:'chuva'},{v:'X',l:'X',d:'Xuxa'},{v:'LH',l:'LH',d:'palha'}];

    const startSession = async () => {
        setLoading(true);
        try {
            const res = await fetch(`${API}/api/sessao-treino/iniciar`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json', Authorization: `Bearer ${token}` },
                body: JSON.stringify({ clienteId: user.id, especialistaId: especialista?.id || 8, dificuldade, idade: 25 })
            });
            const data = await res.json();
            if (!res.ok) throw new Error(data.erro || 'Erro');
            if (Array.isArray(data)) {
                setMsgs(data.map(m => ({ id: Math.random(), type: 'bot', ...m, ts: new Date() })));
                if (data[0]?.sessaoId) setSessaoId(data[0].sessaoId);
            }
            setStarted(true);
        } catch (e) {
            setMsgs([{ id: 1, type: 'error', mensagem: e.message, ts: new Date() }]);
        }
        setLoading(false);
    };

    const startRec = async () => {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
            mediaRef.current = new MediaRecorder(stream);
            chunksRef.current = [];
            mediaRef.current.ondataavailable = e => chunksRef.current.push(e.data);
            mediaRef.current.onstop = () => {
                setAudioBlob(new Blob(chunksRef.current, { type: 'audio/webm' }));
                stream.getTracks().forEach(t => t.stop());
            };
            mediaRef.current.start();
            setRecording(true);
        } catch (e) {
            alert('Erro ao acessar microfone: ' + e.message);
        }
    };

    const stopRec = () => { if (mediaRef.current) { mediaRef.current.stop(); setRecording(false); } };

    const sendAudio = async () => {
        if (!audioBlob || !sessaoId) return;
        setLoading(true);
        setMsgs(p => [...p, { id: Math.random(), type: 'user', mensagem: 'üé§ √Åudio enviado', ts: new Date() }]);
        try {
            const fd = new FormData();
            fd.append('audio', audioBlob, 'audio.webm');
            const res = await fetch(`${API}/api/sessao-treino/${sessaoId}/audio?usarGemini=true`, {
                method: 'POST', headers: { Authorization: `Bearer ${token}` }, body: fd
            });
            const data = await res.json();
            if (!res.ok) throw new Error(data.erro || 'Erro');
            if (Array.isArray(data)) {
                setMsgs(p => [...p, ...data.map(m => ({ id: Math.random(), type: 'bot', ...m, ts: new Date() }))]);
                if (data.some(m => m.sessaoFinalizada)) setFinished(true);
            }
            setAudioBlob(null);
        } catch (e) {
            setMsgs(p => [...p, { id: Math.random(), type: 'error', mensagem: e.message, ts: new Date() }]);
        }
        setLoading(false);
    };

    const reset = () => { setMsgs([]); setSessaoId(null); setStarted(false); setFinished(false); setAudioBlob(null); };

    return (
        <div style={{height:'100vh',display:'flex',flexDirection:'column',background:'linear-gradient(180deg,#0f172a,#1e293b)'}}>
            {/* Header */}
            <header style={{display:'flex',alignItems:'center',justifyContent:'space-between',padding:'16px 24px',background:'rgba(30,41,59,0.9)',borderBottom:'1px solid rgba(255,255,255,0.1)'}}>
                <button onClick={onBack} style={{padding:'8px 16px',borderRadius:8,border:'none',background:'rgba(255,255,255,0.1)',color:'#e2e8f0',cursor:'pointer'}}>‚Üê Voltar</button>
                <div style={{display:'flex',alignItems:'center',gap:8,color:'#f8fafc',fontSize:18,fontWeight:600}}>
                    <span style={{fontSize:24}}>üé§</span> Sess√£o de Treino
                </div>
                <div style={{padding:'4px 12px',borderRadius:20,background:'rgba(99,102,241,0.3)',color:'#a5b4fc',fontWeight:600}}>{dificuldade}</div>
            </header>

            {/* Messages */}
            <div style={{flex:1,overflow:'auto',padding:24}}>
                {!started ? (
                    <div style={{display:'flex',alignItems:'center',justifyContent:'center',height:'100%'}}>
                        <div style={{background:'rgba(30,41,59,0.8)',borderRadius:24,padding:40,maxWidth:500,textAlign:'center'}}>
                            <div style={{fontSize:64,marginBottom:16}}>üéØ</div>
                            <h2 style={{color:'#f8fafc',fontSize:28,margin:'0 0 12px'}}>Configurar Treino</h2>
                            <p style={{color:'#94a3b8',marginBottom:32}}>Escolha o fonema:</p>
                            <div style={{display:'grid',gridTemplateColumns:'repeat(3,1fr)',gap:12,marginBottom:32}}>
                                {difs.map(d => (
                                    <button key={d.v} onClick={() => setDificuldade(d.v)}
                                        style={{padding:16,borderRadius:12,border:dificuldade===d.v?'2px solid #6366f1':'2px solid rgba(255,255,255,0.1)',
                                        background:dificuldade===d.v?'rgba(99,102,241,0.2)':'rgba(15,23,42,0.6)',cursor:'pointer'}}>
                                        <div style={{color:'#f8fafc',fontWeight:600}}>üî§ {d.l}</div>
                                        <div style={{color:'#64748b',fontSize:11}}>{d.d}</div>
                                    </button>
                                ))}
                            </div>
                            <button onClick={startSession} disabled={loading}
                                style={{padding:'16px 48px',borderRadius:12,border:'none',background:'linear-gradient(135deg,#6366f1,#8b5cf6)',color:'#fff',fontSize:18,fontWeight:600,cursor:'pointer',opacity:loading?0.7:1}}>
                                {loading ? '‚è≥ Preparando...' : 'üöÄ Come√ßar'}
                            </button>
                        </div>
                    </div>
                ) : (
                    <div style={{display:'flex',flexDirection:'column',gap:16}}>
                        {msgs.map(m => (
                            <div key={m.id} style={{display:'flex',justifyContent:m.type==='bot'?'flex-start':'flex-end',alignItems:'flex-end',gap:8}}>
                                {m.type==='bot' && <div style={{width:32,height:32,borderRadius:'50%',background:'rgba(99,102,241,0.3)',display:'flex',alignItems:'center',justifyContent:'center'}}>ü§ñ</div>}
                                <div style={{maxWidth:'80%',padding:'16px 20px',borderRadius:20,
                                    background:m.type==='bot'?'rgba(30,41,59,0.9)':m.type==='error'?'rgba(239,68,68,0.2)':'linear-gradient(135deg,#6366f1,#8b5cf6)',
                                    border:m.type==='error'?'1px solid rgba(239,68,68,0.3)':'1px solid rgba(255,255,255,0.1)'}}>
                                    <p style={{color:'#f8fafc',margin:0,whiteSpace:'pre-wrap'}}>{m.mensagem}</p>
                                    {m.palavras?.map((p,i) => (
                                        <div key={i} style={{marginTop:12,padding:16,background:'rgba(99,102,241,0.2)',borderRadius:12,textAlign:'center',color:'#e2e8f0',fontSize:18,fontWeight:500,border:'1px dashed rgba(99,102,241,0.4)'}}>
                                            üì¢ {p}
                                        </div>
                                    ))}
                                    {m.analise && (
                                        <div style={{marginTop:16,background:'rgba(15,23,42,0.6)',borderRadius:12,padding:16}}>
                                            <div style={{display:'flex',justifyContent:'space-between',marginBottom:12,color:'#a5b4fc',fontWeight:600}}>
                                                <span>üìä An√°lise</span>
                                                <span style={{background:'rgba(99,102,241,0.3)',padding:'4px 12px',borderRadius:20,color:'#f8fafc'}}>{m.analise.pontuacaoGeral?.toFixed(0)}%</span>
                                            </div>
                                            {m.analise.resultados?.map((r,i) => (
                                                <div key={i} style={{display:'flex',alignItems:'center',gap:12,padding:'8px 0',borderBottom:'1px solid rgba(255,255,255,0.05)'}}>
                                                    <span style={{color:'#f8fafc',fontWeight:500,minWidth:80}}>{r.palavraEsperada}</span>
                                                    <span style={{color:r.acertou?'#22c55e':'#ef4444',fontWeight:'bold',fontSize:18}}>{r.acertou?'‚úì':'‚úó'}</span>
                                                    <span style={{color:'#94a3b8',fontSize:13}}>{r.feedback}</span>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                    {m.resumoSessao && (
                                        <div style={{marginTop:16,background:'linear-gradient(135deg,rgba(34,197,94,0.2),rgba(16,185,129,0.2))',borderRadius:16,padding:20,border:'1px solid rgba(34,197,94,0.3)'}}>
                                            <div style={{textAlign:'center',fontSize:18,fontWeight:700,color:'#f8fafc',marginBottom:16}}>üèÜ Resumo</div>
                                            <div style={{display:'flex',justifyContent:'center',gap:32}}>
                                                <div style={{textAlign:'center'}}>
                                                    <div style={{fontSize:32,fontWeight:700,color:'#22c55e'}}>{m.resumoSessao.totalAcertos}/{m.resumoSessao.totalPalavras}</div>
                                                    <div style={{color:'#94a3b8',fontSize:12}}>ACERTOS</div>
                                                </div>
                                                <div style={{textAlign:'center'}}>
                                                    <div style={{fontSize:32,fontWeight:700,color:'#22c55e'}}>{m.resumoSessao.pontuacaoGeral?.toFixed(0)}%</div>
                                                    <div style={{color:'#94a3b8',fontSize:12}}>PONTUA√á√ÉO</div>
                                                </div>
                                            </div>
                                        </div>
                                    )}
                                    <div style={{color:'rgba(255,255,255,0.4)',fontSize:11,marginTop:8,textAlign:'right'}}>{m.ts?.toLocaleTimeString('pt-BR',{hour:'2-digit',minute:'2-digit'})}</div>
                                </div>
                            </div>
                        ))}
                        {loading && <div style={{display:'flex',gap:4,padding:16}}><span className="pulse" style={{color:'#6366f1'}}>‚óè</span><span className="pulse" style={{color:'#6366f1',animationDelay:'0.2s'}}>‚óè</span><span className="pulse" style={{color:'#6366f1',animationDelay:'0.4s'}}>‚óè</span></div>}
                        <div ref={endRef} />
                    </div>
                )}
            </div>

            {/* Input */}
            {started && !finished && (
                <div style={{padding:'16px 24px',background:'rgba(30,41,59,0.9)',borderTop:'1px solid rgba(255,255,255,0.1)',display:'flex',gap:12,alignItems:'center',justifyContent:'center'}}>
                    {audioBlob ? (
                        <div style={{display:'flex',flexDirection:'column',alignItems:'center',gap:12,width:'100%',maxWidth:400}}>
                            <audio src={URL.createObjectURL(audioBlob)} controls style={{width:'100%',height:40}} />
                            <div style={{display:'flex',gap:12}}>
                                <button onClick={() => setAudioBlob(null)} style={{padding:'10px 20px',borderRadius:8,border:'1px solid rgba(239,68,68,0.5)',background:'transparent',color:'#fca5a5',cursor:'pointer'}}>‚ùå Cancelar</button>
                                <button onClick={sendAudio} disabled={loading} style={{padding:'10px 24px',borderRadius:8,border:'none',background:'linear-gradient(135deg,#22c55e,#16a34a)',color:'#fff',fontWeight:600,cursor:'pointer'}}>{loading?'‚è≥':'üì§'} Enviar</button>
                            </div>
                        </div>
                    ) : (
                        <div style={{display:'flex',flexDirection:'column',alignItems:'center',gap:12}}>
                            <button onClick={recording ? stopRec : startRec}
                                className={recording ? 'pulse' : ''}
                                style={{display:'flex',alignItems:'center',gap:12,padding:'16px 48px',borderRadius:50,border:'none',
                                background:recording?'linear-gradient(135deg,#ef4444,#dc2626)':'linear-gradient(135deg,#6366f1,#8b5cf6)',
                                color:'#fff',fontSize:18,fontWeight:600,cursor:'pointer',boxShadow:recording?'0 4px 20px rgba(239,68,68,0.4)':'0 4px 20px rgba(99,102,241,0.4)'}}>
                                <span style={{fontSize:24}}>{recording ? '‚èπÔ∏è' : 'üé§'}</span>
                                {recording ? 'Parar Grava√ß√£o' : 'Gravar √Åudio'}
                            </button>
                            {recording && <div style={{color:'#ef4444',fontSize:14,fontWeight:500}}>üî¥ Gravando...</div>}
                        </div>
                    )}
                </div>
            )}

            {finished && (
                <div style={{padding:'16px 24px',background:'rgba(30,41,59,0.9)',borderTop:'1px solid rgba(255,255,255,0.1)',display:'flex',gap:12,justifyContent:'center'}}>
                    <button onClick={reset} style={{padding:'12px 24px',borderRadius:8,border:'none',background:'linear-gradient(135deg,#6366f1,#8b5cf6)',color:'#fff',fontWeight:600,cursor:'pointer'}}>üîÑ Nova Sess√£o</button>
                    <button onClick={onBack} style={{padding:'12px 24px',borderRadius:8,border:'1px solid rgba(255,255,255,0.2)',background:'transparent',color:'#e2e8f0',cursor:'pointer'}}>üè† Voltar</button>
                </div>
            )}
        </div>
    );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
