# --- BANCO DE DADOS OFICIAL (SUPABASE / POSTGRESQL) ---

# ADICIONADO: Credenciais de Conexão (Baseado no que você mandou antes)
spring.datasource.url=jdbc:postgresql://aws-0-us-west-2.pooler.supabase.com:6543/postgres
spring.datasource.username=postgres.thomgikuotfezdnidspz
spring.datasource.password=mfgYCX3rAQRwnZQK
spring.datasource.driver-class-name=org.postgresql.Driver

# Mantido: Importação opcional de .env
spring.config.import=optional:file:.env[.properties]

# --- JPA / HIBERNATE ---
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# COMENTADO: H2 Console não funciona com Postgres
# spring.h2.console.enabled=false

logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql=TRACE

# --- FLYWAY (MIGRAÇÕES DE BANCO) ---
# COMENTADO: Desativado por enquanto para o Hibernate criar as tabelas sozinho.
# Quando você tiver os scripts SQL prontos na pasta db/migration, pode descomentar.
# spring.flyway.target=latest
# spring.flyway.enabled=true
# spring.flyway.locations=classpath:db/migration
# spring.flyway.baselineOnMigrate=false
# spring.flyway.baselineVersion=1
# spring.flyway.validateOnMigrate=false

# ADICIONADO: Desativa explicitamente para evitar erro na inicialização
spring.flyway.enabled=false

# --- CRIAÇÃO DE TABELAS ---
# COMENTADO: 'none' impede a criação.
# spring.jpa.hibernate.ddl-auto=none

# ADICIONADO: 'update' faz o Java criar as tabelas no banco novo automaticamente
spring.jpa.hibernate.ddl-auto=create

# --- HIKARI (POOL DE CONEXÃO) ---
spring.datasource.hikari.auto-commit=true
spring.datasource.hikari.data-source-properties.autosave=always
spring.datasource.hikari.data-source-properties.preferQueryMode=simple
spring.datasource.hikari.data-source-properties.prepareThreshold=0

# --- UPLOAD DE ARQUIVOS ---
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# --- APIS EXTERNAS (MANTIDO) ---
gemini.api.key=AIzaSyCHJCCTwsDTVmirCYOCIH_4fLAE3z3NgDk
deepgram.api.key=e59d13a94b7973a503cf5d7921db612d612a9e75

# --- SEGURANÇA (MANTIDO) ---
api.security.token.secret=${JWT_SECRET:minha-chave-secreta-super-segura-123}
api.security.token.expiration=86400000